import{p as n,e as S,j as c,X as L,Y as I}from"./chunk-BO8V8g2I.js";const P="https://www.youtube-nocookie.com",E="https://www.youtube.com",x="https://img.youtube.com",C=e=>{if(e)try{const t=new URL(e);return t.pathname==="/embed"?void 0:t.hostname==="youtu.be"?t.pathname.slice(1):t.searchParams.get("v")||t.pathname.split("/").pop()}catch{return e}},T=(e,t)=>{var u,s;const i=C(e.url),r=new URL(t);if(i)r.pathname=`/embed/${i}`;else if(e.url)try{const o=new URL(e.url);r.pathname=o.pathname,r.search=o.search}catch{}const d=Object.keys(e),a={};a.autoplay="1";for(const o of d)if(e[o]!==void 0)switch(o){case"autoplay":e.autoplay&&e.muted===void 0&&(a.mute="1");break;case"muted":a.mute=e.muted?"1":"0";break;case"showControls":a.controls=e.showControls?"1":"0";break;case"showRelatedVideos":a.rel=e.showRelatedVideos?"1":"0";break;case"keyboard":a.keyboard=e.keyboard?"1":"0";break;case"loop":a.loop=e.loop?"1":"0",e.loop&&(e.playlist??"").trim()===""&&(a.playlist=i);break;case"inline":a.playsinline=e.inline?"1":"0";break;case"allowFullscreen":a.fs=e.allowFullscreen?"1":"0";break;case"captionLanguage":a.cc_lang_pref=e.captionLanguage;break;case"showCaptions":a.cc_load_policy=e.showCaptions?"1":"0";break;case"showAnnotations":a.iv_load_policy=e.showAnnotations?"1":"3";break;case"startTime":a.start=(u=e.startTime)==null?void 0:u.toString();break;case"endTime":a.end=(s=e.endTime)==null?void 0:s.toString();break;case"disableKeyboard":a.disablekb=e.disableKeyboard?"1":"0";break;case"language":a.hl=e.language;break;case"listId":a.list=e.listId;break;case"listType":a.listType=e.listType;break;case"color":a.color=e.color;break;case"origin":a.origin=e.origin;break;case"referrer":a.widget_referrer=e.referrer;break;case"playlist":a.playlist=e.playlist;break;case"enablejsapi":a.enablejsapi=e.enablejsapi?"1":"0";break}return Object.entries(a).forEach(([o,l])=>{l!==void 0&&r.searchParams.append(o,l.toString())}),r.toString()},k=e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="true",document.head.appendChild(t)};let j=!1;const _=e=>{if(!(j||window.matchMedia("(hover: none)").matches)){try{const t=new URL(e);k(t.origin)}catch{}k(x),j=!0}},F=e=>new URL(`${x}/vi/${e}/maxresdefault.jpg`),A=()=>c.jsx("div",{className:"flex w-full h-full items-center justify-center text-lg",children:'Open the "Settings" panel and paste a video URL, e.g. https://youtube.com/watch?v=dQw4w9WgXcQ'}),O=({title:e,status:t,loading:u,videoUrl:s,previewImageUrl:i,autoplay:r,inline:d,renderer:a,showPreview:o,onStatusChange:l,onPreviewImageUrlChange:p})=>{const[m,h]=n.useState(0),w=n.useRef(null);return n.useEffect(()=>{r&&a!=="canvas"&&t==="initial"&&l("loading")},[r,t,a,l]),n.useEffect(()=>{a!=="canvas"&&_(s)},[a,s]),n.useEffect(()=>{const b=C(s);if(!b||!o){p(void 0);return}i||p(F(b))},[p,o,s,i]),a==="canvas"||t==="initial"?null:c.jsx("iframe",{ref:w,title:e,src:s,loading:u,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",width:"100%",height:"100%",opacity:m,transition:"opacity 1s",border:"none"},onLoad:()=>{l("ready"),h(1),!d&&!r&&w.current&&I(w.current)}})},$=n.forwardRef(({url:e,loading:t="lazy",autoplay:u,showPreview:s,showAnnotations:i,showCaptions:r,showControls:d,allowFullscreen:a,keyboard:o,children:l,privacyEnhancedMode:p,inline:m=!1,...h},w)=>{const[b,y]=n.useState("initial"),[g,U]=n.useState(),{renderer:f}=n.useContext(S),R=p??!0?P:E,v=T({...h,inline:m,url:e,keyboard:o,showAnnotations:i,showCaptions:r,allowFullscreen:a,showControls:d,autoplay:u,enablejsapi:!1},R);return c.jsx(L.Provider,{value:{status:b,previewImageUrl:g,onInitPlayer(){f!=="canvas"&&y("loading")}},children:c.jsx("div",{...h,ref:w,children:v?c.jsxs(c.Fragment,{children:[l,c.jsx(O,{title:h.title,autoplay:u,videoUrl:v,previewImageUrl:g,loading:t,inline:m,showPreview:s,renderer:f,status:b,onStatusChange:y,onPreviewImageUrlChange:U})]}):c.jsx(A,{})})})});$.displayName="YouTube";export{$};
