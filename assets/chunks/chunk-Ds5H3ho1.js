import{p as a,e as $,j as x}from"./chunk-BO8V8g2I.js";const f="data-ws-video-id",y={HAVE_METADATA:1},N=a.forwardRef(({$progress:t,$visible:u,$timeline:d,$webstudio$canvasOnly$assetId:h,children:p,src:n,...m},b)=>{const o=a.useId(),v={[f]:o},{videoLoader:l}=a.useContext($),A=n&&l?l({src:n}):n;return a.useEffect(()=>{if(t===void 0||u===void 0)return;const e=document.querySelector(`[${f}="${o}"]`);if(e===null||!(e instanceof HTMLVideoElement))return;if(e.play().catch(()=>{}),e.pause(),d)return t.subscribe(s=>{if(e.readyState<y.HAVE_METADATA||(e.paused||e.pause(),e.seeking))return;let i=e.duration;Number.isNaN(i)||(Number.isFinite(i)||(i=60),e.currentTime=(s??0)*i)});let r=!1,c=!1;const E=u.subscribe(s=>{c=s,c===!1&&r===!1&&!e.loop&&(e.currentTime=0)}),T=t.subscribe(s=>{if(r&&(s===void 0||s===0||s===1)){r=!1,e.pause(),c===!1&&r===!1&&!e.loop&&(e.currentTime=0);return}r||(r=!0,e.ended||e.play().catch(()=>{}))});return()=>{T(),E()}},[t,d,u,o]),x.jsx("video",{src:A,...m,...v,ref:b,children:p})});N.displayName="Video";export{N as _};
